{% extends 'base.html' %}
{% load static %}

{% block title %}Nueva Contraseña - EvalExpo AI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/password-reset-confirm.css' %}">
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        {% if validlink %}
            <div class="auth-header">
                <div class="auth-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h1 class="auth-title">Nueva Contraseña</h1>
                <p class="auth-subtitle">
                    Establece una nueva contraseña segura para tu cuenta
                </p>
            </div>

            <div class="password-requirements">
                <h6><i class="fas fa-shield-alt me-2"></i>Requisitos de seguridad:</h6>
                <ul>
                    <li>Mínimo 8 caracteres</li>
                    <li>Combina letras, números y símbolos</li>
                    <li>Evita información personal</li>
                    <li>No uses contraseñas anteriores</li>
                </ul>
            </div>

            <form method="post" novalidate>
                {% csrf_token %}
                
                <div class="form-floating">
                    {{ form.new_password1 }}
                    <label for="{{ form.new_password1.id_for_label }}">
                        <i class="fas fa-lock me-2"></i>{{ form.new_password1.label }}
                    </label>
                    {% if form.new_password1.errors %}
                        <div class="text-danger mt-2">
                            {% for error in form.new_password1.errors %}
                                <small><i class="fas fa-exclamation-circle me-1"></i>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% if form.new_password1.help_text %}
                        <div class="form-text">{{ form.new_password1.help_text }}</div>
                    {% endif %}
                </div>

                <div class="form-floating">
                    {{ form.new_password2 }}
                    <label for="{{ form.new_password2.id_for_label }}">
                        <i class="fas fa-check-circle me-2"></i>{{ form.new_password2.label }}
                    </label>
                    {% if form.new_password2.errors %}
                        <div class="text-danger mt-2">
                            {% for error in form.new_password2.errors %}
                                <small><i class="fas fa-exclamation-circle me-1"></i>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save me-2"></i>Establecer Nueva Contraseña
                </button>
            </form>
        {% else %}
            <div class="invalid-link">
                <div class="invalid-icon">
                    <i class="fas fa-times"></i>
                </div>
                <h1 class="auth-title">Enlace Inválido</h1>
                <p class="auth-subtitle">
                    Este enlace de recuperación ha expirado o no es válido.
                </p>
                
                <div class="mt-4">
                    <a href="{% url 'auth:password_reset' %}" class="btn btn-success">
                        <i class="fas fa-redo me-2"></i>Solicitar Nuevo Enlace
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}