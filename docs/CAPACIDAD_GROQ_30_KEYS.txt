===============================================================================
C√ÅLCULO DE CAPACIDAD CON 30 API KEYS DE GROQ
===============================================================================

L√çMITES DE GROQ API (Plan Gratuito - actualizado Nov 2024)
------------------------------------------------------------
Por cada API key gratuita:
- Requests por minuto (RPM): 30 requests/min
- Tokens por minuto (TPM): 6,000 tokens/min
- Requests por d√≠a (RPD): 14,400 requests/d√≠a
- Tokens por d√≠a (TPD): Ilimitado en tokens (solo limitado por RPM)

Modelo usado: Llama 3.3 70B


AN√ÅLISIS T√çPICO POR VIDEO DE PRESENTACI√ìN
------------------------------------------------------------
Componentes que usan Groq API:
1. An√°lisis de coherencia por participante
2. Feedback personalizado por participante
3. An√°lisis global opcional

Consumo promedio por video de 5-10 minutos con 2-3 participantes:
- Requests totales: 3-6 requests (1-2 por participante + an√°lisis global)
- Tokens por request:
  * Input: ~1,500 tokens (transcripci√≥n + contexto + instrucciones)
  * Output: ~500 tokens (an√°lisis estructurado JSON)
  * Total por request: ~2,000 tokens
- Total tokens por video: 6,000-12,000 tokens

Tiempo de procesamiento: ~10-20 segundos (con rotaci√≥n de keys)


CAPACIDAD CON 1 API KEY
------------------------------------------------------------
Por minuto:
- M√°ximo 30 requests/min
- M√°ximo 6,000 tokens/min
- Limitante: TOKENS (6,000 tokens permite ~3 requests de 2,000 tokens)
- Videos procesables: ~1 video/minuto (si tiene 3 participantes)

Por hora:
- 60 minutos √ó 1 video/min = ~60 videos/hora

Por d√≠a:
- 14,400 requests/d√≠a
- Con 4 requests promedio/video = ~3,600 videos/d√≠a
- PERO limitado por TPM: ~1,440 videos/d√≠a (60 videos/hora √ó 24h)


CAPACIDAD CON 30 API KEYS (CON ROTACI√ìN AUTOM√ÅTICA)
------------------------------------------------------------
Sistema de rotaci√≥n:
- El sistema alterna entre las 30 keys autom√°ticamente
- Si una key alcanza rate limit, pasa a la siguiente
- Cada key se "resetea" cada minuto

Por minuto (rotaci√≥n perfecta):
- 30 keys √ó 6,000 tokens/min = 180,000 tokens/min disponibles
- Con 6,000-12,000 tokens/video = 15-30 videos/minuto

Por hora:
- Escenario conservador: 15 videos/min √ó 60 min = 900 videos/hora
- Escenario optimista: 30 videos/min √ó 60 min = 1,800 videos/hora
- Promedio recomendado: ~1,200 videos/hora

Por d√≠a:
- Conservador: 900 videos/hora √ó 24h = 21,600 videos/d√≠a
- Optimista: 1,800 videos/hora √ó 24h = 43,200 videos/d√≠a
- Promedio recomendado: ~28,800 videos/d√≠a


FACTORES QUE AFECTAN LA CAPACIDAD REAL
------------------------------------------------------------
‚úÖ Factores que mejoran capacidad:
- Videos cortos (< 5 min): menos tokens, m√°s videos/hora
- Pocos participantes (1-2): menos requests/video
- Transcripciones concisas: menos tokens de input
- Cache de resultados: evita reprocesar mismo video

‚ö†Ô∏è Factores que reducen capacidad:
- Videos largos (> 10 min): m√°s tokens por request
- Muchos participantes (4-5): m√°s requests/video
- Transcripciones detalladas: m√°s tokens de input
- An√°lisis m√∫ltiples: reintentos por errores
- Latencia de red: tiempo entre requests


ESCENARIOS DE USO PR√ÅCTICO
------------------------------------------------------------

Escenario 1: Universidad peque√±a (100 estudiantes/mes)
- 100 estudiantes √ó 3 presentaciones/semestre = 300 videos/semestre
- Con 30 keys: 300 videos procesables en ~15-20 minutos
- Capacidad sobrante: 99.9%

Escenario 2: Universidad mediana (1,000 estudiantes/mes)
- 1,000 estudiantes √ó 3 presentaciones/semestre = 3,000 videos/semestre
- Con 30 keys: 3,000 videos procesables en ~2-3 horas
- Capacidad sobrante: 99%

Escenario 3: Universidad grande (10,000 estudiantes/mes)
- 10,000 estudiantes √ó 3 presentaciones/semestre = 30,000 videos/semestre
- Con 30 keys: 30,000 videos procesables en ~1 d√≠a completo
- Capacidad sobrante: 90%

Escenario 4: Procesamiento intensivo continuo
- Si procesas 24/7 sin parar: ~28,800 videos/d√≠a
- Mes completo: ~864,000 videos/mes
- A√±o completo: ~10.5 millones de videos/a√±o


RECOMENDACIONES DE CONFIGURACI√ìN
------------------------------------------------------------
Para m√°ximo rendimiento con 30 keys:

1. Distribuci√≥n de keys:
   - Opci√≥n A: 30 cuentas diferentes (m√°xima capacidad)
   - Opci√≥n B: 10 cuentas √ó 3 keys c/u (m√°s f√°cil gesti√≥n)
   - Opci√≥n C: 1 cuenta duplicada 30 veces (m√≠nima capacidad pero funcional)

2. Configuraci√≥n √≥ptima en .env:
   GROQ_API_KEY_1=gsk_cuenta1_key1
   GROQ_API_KEY_2=gsk_cuenta1_key2
   ...
   GROQ_API_KEY_30=gsk_cuenta10_key3

3. Timeout de rotaci√≥n:
   - Actual: 60 segundos (default)
   - Recomendado para alto volumen: 30 segundos
   - Para debugging: 120 segundos

4. Estrategias de optimizaci√≥n:
   - Procesar videos en cola (batch processing)
   - Priorizar videos cortos en horas pico
   - Cachear an√°lisis de asignaciones repetidas
   - Comprimir transcripciones largas (res√∫menes)


MONITOREO Y ALERTAS
------------------------------------------------------------
El sistema ya incluye:
‚úÖ Rotaci√≥n autom√°tica de keys
‚úÖ Detecci√≥n de rate limits (429)
‚úÖ Fallback a siguiente key disponible
‚úÖ Logging de uso por key
‚úÖ Reintentos autom√°ticos

M√©tricas recomendadas a monitorear:
- Requests por key por minuto
- Tasa de √©xito/fallo por key
- Tiempo promedio de respuesta
- Distribuci√≥n de carga entre keys


RESUMEN EJECUTIVO
------------------------------------------------------------
Con 30 API keys de Groq configuradas correctamente:

üìä CAPACIDAD TE√ìRICA:
   - M√°xima: ~43,200 videos/d√≠a
   - Conservadora: ~21,600 videos/d√≠a
   - Promedio recomendado: ~28,800 videos/d√≠a

üí∞ COSTO:
   - GRATIS (plan gratuito de Groq)
   - $0 por 30 API keys
   - $0 por ~28,800 videos/d√≠a

‚ö° VELOCIDAD:
   - ~1,200 videos/hora
   - ~20 videos/minuto
   - ~3 segundos por video (promedio)

üéØ CONCLUSI√ìN:
   30 API keys de Groq son m√°s que suficientes para:
   - Universidades de hasta 50,000 estudiantes
   - Procesamiento continuo 24/7
   - Picos de carga estacionales (fin de semestre)
   - Margen de seguridad: >90%


ACTUALIZADO: Noviembre 2024
Sistema: evaIA v12 con rotaci√≥n de 30 keys
===============================================================================
